# 打包库文件

自然可以先写一个库然后导出

### 几种引入方式

```javascript
//ESModule
import library from "library"

//CommonJS
const library = require("library");

//AMD
require(['library'],function()=>{

})

//script标签
<script src="library.js"></script>
```

output 中加上:

```javascript
library:"library",
libraryTarget: "umd"
```

library 是配合 libraryTarget 使用,把这玩意挂载到全局变量,
当 libraryTarget 不为 umd 时,变量名就是 libraryTarget.library,那么 script 引入后就可以使用
当 libraryTarget 为 umd 时,变量名就是 library

libraryTarget:"umd" 是给 ESModule、AMD、CommonJS 方法使用,保证正常引入

# 当你自己的库里面引入了别的第三方库

这样别人用你这个库就有可能某个第三方库同时下载了两次
这显然不对

解决方法是加上配置

```jascript
externals: {
  lodash: "lodash"
}
```

那么如果打包的时候遇到了 lodash,就忽略这个库,不要打包
然后你引入 lodash 的时候必须叫 lodash 这个名字,即双引号的东西

然后打包,改一改 package.json 中的那个 main

然后 npm adduser
npm publish
